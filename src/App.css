/* ============ Theme tokens (Binance-ish) ============ */
:root{
  --bg:#ffffff;
  --panel:#ffffff;
  --card:#FAFBFC;
  --text:#1E2329;
  --muted:#6C7280;
  --border:#E6E8EA;

  --green:#25C26E;   /* Buy */
  --green-deep:#118B4B;
  --red:#F6465D;     /* Sell */
  --red-deep:#D93D50;
  --yellow:#F0B90B;  /* accent */

  --shadow:0 8px 20px rgba(0,0,0,.06);
  --radius:12px;
}

html,body{height:100%}
*{box-sizing:border-box}
body{
  margin:0;
  background:var(--bg);
  color:var(--text);
  font-family:Inter,'Noto Sans KR','Apple SD Gothic Neo',Roboto,'Segoe UI',Arial,sans-serif;
  letter-spacing:-.2px;
}

.container{max-width:1200px;margin:0 auto;padding:0 16px}

h1, h2{
  margin-top:16px;
  margin-bottom:28px;        /* 타이틀과 본문 간격 */
  color:#0B1426;
  letter-spacing:-.3px;
}

/* ========= 공통: 모바일 반응형 변수 ========= */
:root{
  --donut-size: clamp(64px, 20vw, 100px);      /* 도넛 지름 */
  --donut-box:  clamp(110px, 24vw, 140px);     /* 각 도넛 박스 너비 */
  --gap-xl:     clamp(16px, 4vw, 40px);        /* 큰 간격 */
  --fs-xxs:     clamp(11px, 2.6vw, 13px);
  --fs-xs:      clamp(12px, 2.8vw, 14px);
  --fs-sm:      clamp(13px, 3vw, 16px);
}

/* ========== 오늘의 목표 (도넛) ========== */
.goal-box{ margin-bottom: 8px; }

.goals-grid{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:56px;
  margin-top:10px;
}

.goal-doughnut{
  display:flex;
  flex-direction:column;
  align-items:center;
  position:relative;
  width:var(--donut-box);
  transition:transform .25s ease, filter .25s ease;
  cursor:pointer;
}
.goal-doughnut:hover{ transform:scale(1.08); filter:brightness(1.06); }

.chart-wrapper{ position:relative; width:var(--donut-size); height:var(--donut-size); margin-bottom:10px; }
.chart-wrapper canvas{ width:100% !important; height:100% !important; } /* 캔버스 꽉 채우기 */

.percentage{
  position:absolute;inset:0;display:flex;align-items:center;justify-content:center;
  font-weight:800;font-size:var(--fs-xs);color:#39424C;
}

.label{ margin-top:2px; font-size:var(--fs-xs); font-weight:700; color:#1E2329; }
.count{ font-size:var(--fs-xxs); color:#5B616E; margin-top:2px; }
.count .goal-value{ color:var(--red); font-weight:700; }
.goal-reached{ color:var(--red); font-weight:700; }

/* 시간 범례 */
.time-range{ font-size:var(--fs-xxs); color:#8A9099; text-align:center; margin-top:6px; }

/* === Mobile: 도넛 5개 한 줄 === */
@media (max-width: 480px) {
  .goals-grid{
    display:grid;
    grid-template-columns: repeat(5, minmax(0, 1fr));
    gap: 6px;
    justify-items: center;
  }
  .goal-doughnut{ width: auto; }
  .goal-doughnut .chart-wrapper{ width: 56px; height: 56px; margin-bottom: 4px; }
  .goal-doughnut .percentage{ font-size: 11px; }
  .goal-doughnut .label{ font-size: 12px; }
  .goal-doughnut .count{ font-size: 11px; line-height: 1.1; }

  /* ✅ 모바일에서도 시간 표시 (숨김 해제 & 축소) */
  .goal-doughnut .time-range{
    display: block !important;
    font-size: 11px;
    line-height: 1.2;
    margin-top: 4px;
    color: #8A9099;
    text-align: center;
  }
  .goal-doughnut .time-range > div{
    display: block;  /* 평일/주말 줄바꿈 */
  }
}
@media (max-width: 420px){
  .goals-grid{ gap: 14px; }
  .goal-doughnut .chart-wrapper{ width: 50px; height: 50px; }
  .goal-doughnut .label{ font-size: 11px; }
}

/* ========== 업데이트 시간 ========== */
.update-time{ margin: 6px 0 8px; font-size:13px; color:#6C7280; }
.update-time{ font-size: var(--fs-xxs); }

/* ========== 배달 완료 순위 (표) ========== */
/* 가로 스크롤 래퍼(모바일에서도 열 숨김 없이 유지) */
.lb-scroll{
  overflow-x:auto;
  -webkit-overflow-scrolling:touch;
  width:100%;
}

/* 표 기본 */
table.leaderboard{
  width:100%;
  min-width:1080px;                 /* PC 열 구성을 유지하도록 최소폭 설정 */
  border-collapse:separate;
  border-spacing:0 10px;
  font-size:14px;
}

table.leaderboard thead th{
  padding:10px 12px; text-align:center; color:#848E9C; font-weight:600;
  border-bottom:1px solid var(--border);
  background:#fff;
}

table.leaderboard tbody tr td{
  background:var(--card);
  border-top:1px solid var(--border);
  border-bottom:1px solid var(--border);
  text-align:center; padding:14px 12px; vertical-align:middle;
}
table.leaderboard tbody tr td:first-child{
  border-left:1px solid var(--border); border-top-left-radius:10px; border-bottom-left-radius:10px;
  position:relative;
}
table.leaderboard tbody tr td:last-child{
  border-right:1px solid var(--border); border-top-right-radius:10px; border-bottom-right-radius:10px;
}
table.leaderboard tbody tr:hover td{ background:#F4F6F8; }

/* (선택) 스크롤 시 헤더/첫 컬럼 고정 */
.lb-scroll thead th{
  position:sticky; top:0; z-index:3;
}
.lb-scroll tbody td:first-child,
.lb-scroll thead th:first-child{
  position:sticky; left:0; z-index:2; background:#fff;
  box-shadow:1px 0 0 rgba(0,0,0,0.06);
}

/* 시간대별 2x2 그리드(표 내부 칸) */
.time-grid{
  display:grid; grid-template-columns:repeat(2, max-content); row-gap:8px; column-gap:20px;
  justify-content:center;
}
.time-grid > div{
  display:flex; align-items:center; justify-content:flex-start; gap:6px;
  width:max-content; margin:0 auto; white-space:nowrap; font-size:13px;
}
.time-num{ text-align:right; }

/* 상태 배지 */
.status{
  display:inline-flex;align-items:center;justify-content:center;min-width:88px;
  height:28px;padding:0 10px;border-radius:8px;font-size:13px;font-weight:800;color:#fff;
}
.status-running{ background:var(--green); }
.status-ended{  background:var(--red); }

/* === Mobile: 리더보드 표 압축(열 숨김 없음) === */
@media (max-width: 768px){
  table.leaderboard th, table.leaderboard td{
    padding:10px 6px;
    font-size:var(--fs-sm);
    white-space:nowrap;
  }
  .status{ padding: 3px 8px; font-size: 12px; }
  table.leaderboard td.time-col{ font-size: 12px; line-height:1.2; }
  .time-grid{ column-gap:12px; row-gap:4px; }
  .time-grid > div{ font-size:12px; }
}
@media (max-width: 480px){
  table.leaderboard{ table-layout:auto; font-size:12px; }
  table.leaderboard th, table.leaderboard td{ padding:6px 4px; }
  .status{ padding:2px 8px; font-size:11px; }
  table.leaderboard td.time-col{ font-size:11px; line-height:1.2; }
  .time-grid{ column-gap:8px; row-gap:2px; }
  .time-grid > div{ font-size:11px; }
}
@media (max-width: 360px){
  table.leaderboard{ font-size:11px; }
  table.leaderboard th, table.leaderboard td{ padding:5px 3px; }
  .status{ font-size:10px; padding:2px 6px; }
}

/* 좌우 여백 살짝 줄여 모바일 답답함 해소 */
.container{ padding: 0 clamp(10px, 3.5vw, 16px); }

/* 제목도 반응형 */
h1{ font-size: clamp(18px, 4.5vw, 26px); margin-bottom: clamp(18px, 4vw, 40px); }

/* ========== 미션 영역 (카드) ========== */
.mission-box{ margin-top:14px; padding: 0 0 22px 0; background:transparent; border:none; }
.mission-duo-container {
  margin-top: 16px;
  display: flex;
  justify-content: center;
  gap: var(--gap-xl);
  flex-wrap: wrap;
  padding: 0 8px;
}
.mission-block{
  position:relative; background:var(--panel); border:1px solid var(--border); border-radius:20px;
  padding: clamp(18px, 3.5vw, 28px); max-width:520px; flex:1 1 280px; box-shadow:var(--shadow); text-align:center;
}

/* 타이틀 */
.mission-title{
  display:flex; align-items:center; justify-content:center; gap:10px;
  font-size:22px; font-weight:900; margin-bottom:4px;
}
.mission-title .black-square{ width:12px; height:12px; border-radius:3px; background:#111; }

/* 시간 텍스트 */
.mission-time{ font-size:16px; color:#6C7280; margin-bottom:14px; }

/* 스테이지 */
.mission-stages{ display:grid; grid-template-columns:1fr 1fr; gap:24px; margin-top:6px; }
.mission-stage{ text-align:center; font-size:14px; line-height:1.7; color:#222; display:flex; flex-direction:column; gap:6px; }
.mission-stage strong{
  display:inline-flex; align-items:center; justify-content:center;
  min-width:70px; height:30px; padding:0 10px;
  background:#ECEFF3; border:1px solid var(--border); border-radius:8px;
  font-size:13px; font-weight:800; color:#39424C;
}

/* 반응형 */
@media (max-width: 860px){
  .mission-duo-container{ gap:16px; }
  .mission-block{ padding:20px; }
  .mission-stages{ gap:16px; grid-template-columns:1fr; }
  .mission-title{ font-size:20px; }
}

/* =========================
   미션 카드: Hover 색반전 테마
   ========================= */
.mission-block{
  --card-bg: rgba(255,255,255,0.65);   /* 평소 배경(밝음) */
  --card-fg: #181818;                  /* 평소 글자색 */
  --chip-bg: rgba(0,0,0,0.06);         /* 1단계/2단계 배경 */
  --chip-fg: #333;                     /* 1단계/2단계 글자 */
  --chip-border: rgba(0,0,0,0.08);     /* 1단계/2단계 테두리 */

  background: var(--card-bg);
  color: var(--card-fg);
  transition: background .25s ease, color .25s ease,
              box-shadow .25s ease, transform .18s ease;
}
.mission-title{ color: var(--card-fg); }
.mission-title .black-square{
  background: currentColor;
  box-shadow: 0 0 0 2px rgb(0 0 0 / 0.12);
  transition: background .25s ease, box-shadow .25s ease;
}
.mission-stage strong{
  background: var(--chip-bg);
  color: var(--chip-fg);
  border-color: var(--chip-border);
  transition: background .25s ease, color .25s ease, border-color .25s ease;
}
.mission-time,
.mission-stage div{
  color: #666;
  transition: color .25s ease;
}
.mission-block:hover{
  --card-bg: #121212;
  --card-fg: #ffffff;
  --chip-bg: rgba(255,255,255,0.16);
  --chip-fg: #ffffff;
  --chip-border: rgba(255,255,255,0.28);
  transform: translateY(-2px);
  box-shadow: 0 16px 40px rgba(0,0,0,0.18);
}
.mission-block:hover .mission-time,
.mission-block:hover .mission-stage div{
  color: rgba(255,255,255,0.85);
}

/* === 전체 열을 모바일에서도 모두 보이게 === */
@media (max-width: 1024px){
  table.leaderboard th,
  table.leaderboard td{
    display: table-cell !important;
  }
}

/* === 가로 스크롤 래퍼 + 테이블 최소 너비 === */
.table-scroll{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  border-radius: 12px;
}

/* 칼럼 8개 전부 보이도록 최소 너비를 강제로 확보 (원하면 값 조절) */
.table-scroll .leaderboard{
  min-width: 1080px;   /* 1000~1200px 사이에서 취향대로 */
}

/* 모바일에서 조금 더 촘촘하게 보이도록 */
@media (max-width: 480px){
  .table-scroll .leaderboard th,
  .table-scroll .leaderboard td{
    padding: 8px 6px;
   .font-size: 12px;
  }
  .status{ font-size: 11px; padding: 2px 8px; }
}

/* === 스크롤 안에서 thead를 고정(스티키 헤더) === */
.table-scroll thead th{
  position: sticky;
  top: 0;
  background: var(--bg);
  z-index: 2;
}

/* 스크롤 힌트(선택) */
.scroll-hint{
  display:none;
  font-size:12px;
  color: var(--muted);
  margin: 6px 0 0;
  text-align:right;
}
@media (max-width:768px){
  .scroll-hint{ display:block; }
}

/* 가로 스크롤 컨테이너 */
.table-scroll{
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}

/* 테이블이 스크롤을 만들도록 최소 너비를 주는 게 안전 */
table.leaderboard{
  min-width: 960px; /* 화면보다 넓게 해서 스크롤 발생 */
}

/* 고정 열의 기준 너비(순위, 라이더) */
:root{
  --col-rank: 68px;     /* 순위 열 너비 */
  --col-rider: 140px;   /* 라이더 열 너비 */
}

/* 순위/라이더 헤더·셀 기본 너비 */
th.rank, td.rank   { min-width: var(--col-rank);  width: var(--col-rank);  }
th.rider, td.rider { min-width: var(--col-rider); width: var(--col-rider); }

/* sticky(고정) 공통 */
.sticky-col{
  position: sticky;
  left: 0;
  z-index: 2;                     
  background: var(--card, #fff);  
}

/* 두 번째 고정 열(라이더)은 첫 열 너비만큼 오른쪽에 고정 */
.sticky-col-2{
  position: sticky;
  left: calc(var(--col-rank));
  z-index: 2;
  background: var(--card, #fff);
}

/* 헤더는 셀보다 z-index 더 높게 (겹침 방지) */
thead .sticky-col,
thead .sticky-col-2{
  z-index: 3;
}

/* 고정 열 오른쪽 경계 강조(선택) */
.sticky-col-2{
  box-shadow: 2px 0 0 0 rgba(0,0,0,0.06);
}

/* 헤더/셀은 줄바꿈을 막아 폭이 흔들리지 않게 */
table.leaderboard th, table.leaderboard td{
  white-space: nowrap;
}

/* =========================
   Stage colors (pastel chips)
   ========================= */
:root{
  /* 1단계(연한 초록) */
  --stage1-bg:     #EAF8F1;  /* chip background */
  --stage1-fg:     #0F7A4A;  /* text */
  --stage1-border: #CDEEDF;

  /* 2단계(연한 파랑) */
  --stage2-bg:     #EEF4FF;
  --stage2-fg:     #1E4DB7;
  --stage2-border: #D7E4FF;
}

/* 1단계 칩 */
.mission-stages .mission-stage:nth-child(1) strong{
  background: var(--stage1-bg) !important;
  color: var(--stage1-fg) !important;
  border-color: var(--stage1-border) !important;
}

/* 2단계 칩 */
.mission-stages .mission-stage:nth-child(2) strong{
  background: var(--stage2-bg) !important;
  color: var(--stage2-fg) !important;
  border-color: var(--stage2-border) !important;
}

/* Hover(카드 반전 시에도 칩 색 유지 & 가독성 향상) */
.mission-block:hover .mission-stages .mission-stage:nth-child(1) strong{
  background: rgba(37, 194, 110, .22) !important; 
  color: #fff !important;
  border-color: rgba(255,255,255,.3) !important;
}
.mission-block:hover .mission-stages .mission-stage:nth-child(2) strong{
  background: rgba(59, 130, 246, .22) !important; 
  color: #fff !important;
  border-color: rgba(255,255,255,.3) !important;
}

/* 숫자 폭 고정 + 정렬 */
.goal-doughnut .time-range,
.goal-doughnut .time-range *{
  font-variant-numeric: tabular-nums lining-nums;
  font-feature-settings: "tnum" 1, "lnum" 1;
}

.goal-doughnut .time-range{
  text-align: center;    /* 필요시 left로 변경 */
}

@media (max-width:480px){
  .goal-doughnut .time-range{
    display:block !important;
    font-size:11px; line-height:1.2; margin-top:4px;
  }
  .goal-doughnut .time-range > div{ display:block; }
}

/* === 오늘의 목표: 상단 고정(Sticky) === */
.goal-sticky{
  position: sticky;
  top: 0;                           /* 화면 최상단에 고정 */
  z-index: 50;                      /* 다른 요소 위로 */
  background: var(--bg);            /* 겹침 시 내용 가림 방지 */
  border-bottom: 1px solid var(--border);
  /* 보기 좋은 살짝의 유리 효과(선택) */
  backdrop-filter: saturate(160%) blur(6px);
  -webkit-backdrop-filter: saturate(160%) blur(6px);
}

/* 좁은 화면에서 고정 영역이 과하게 커 보이지 않도록 살짝 압축(선택) */
@media (max-width: 480px){
  .goal-box{ padding: 6px 0 8px; }
  .goals-grid{ gap: 8px; }
}

/* === 모바일에서 '오늘의 목표' 시간 표기 보이기 & 2줄 정렬 === */
@media (max-width: 480px){
  /* 1) 예전의 display: none 무시 */
  .goal-doughnut .time-range{
    display: block !important;
    margin-top: 6px;
    text-align: center;
    font-size: 11px;      /* 필요시 조절 */
    line-height: 1.2;
  }

  /* 2) 라벨/값을 세로(2줄)로 정렬 */
  .goal-doughnut .time-range .tr{
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 2px;
    margin-top: 2px;
  }

  /* 3) 라벨 뒤에 콜론 자동 추가 → "평일 :" / "주말 :" */
  .goal-doughnut .time-range .tr-label::after{
    content: " :";
  }
}